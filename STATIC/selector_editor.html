<div class="selector_editor">
    <div>
        <h3>Sélecteur actuel :</h3>
        <div id="rendered_selector" style="text-align: center; margin-bottom: 1em; font-size: 1.1em;"></div>
    </div>
    <div class="selector_builder">
        <h4>Conditions</h4>
        <div class="selector_conditions">
            <div class="button" onclick="updateRenderedSelector(addCondition(0))">OU</div>
            <div class="button" onclick="updateRenderedSelector(addCondition(1))">ET</div>
        </div>
    </div>
    <details class="real_selector"><!-- Add "open" attribute to details tag to open it by default -->
        <summary>Avancé - Sélecteur réel</summary>
        <pre id="raw_selector">%RAW_SELECTOR%</pre>
    </details>
</div>
<div style="display: none;">
    <input id="input" value="" />
    <script>
        (function () {
            const rawSelector = document.getElementById('raw_selector');
            const renderedSelector = document.getElementById('rendered_selector');
            const rawSelectorValue = rawSelector.textContent;
            let selectorRepresentation = JSON.parse(rawSelectorValue);
            renderedSelector.innerHTML = transcribeSelector(selectorRepresentation);
            document.getElementById('input').setAttribute('value', rawSelectorValue);
        })();
    </script>
    <!-- The script above is not executed until the "image" below injects it into the HTML code above. -->
    <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onload="const scriptCode = this.parentElement.querySelector('script').innerHTML; const scriptNode = document.createElement('script'); scriptNode.innerHTML = scriptCode; this.parentElement.appendChild(scriptNode);">
</div>
